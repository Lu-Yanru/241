\let\hspaceThis\hphantom

\newcommand{\appref}[1]{Appendix \ref{#1}}
\newcommand{\fnref}[1]{Footnote \ref{#1}}
\renewcommand{\sectref}[1]{section~\ref{#1}}

\newcommand*{\Boite}{\bgroup\normalfont\ttfamily ▢\egroup}

\tcbuselibrary{theorems}

\newcommand*{\PrintRecommendations}[1]
  {%
    \vskip\baselineskip
    \begin{refsection}
    \nocite{*}
    \printbibliography[heading=none,keyword={Ch-#1}]
    \end{refsection}
  }

\newtcbtheorem[number within=chapter]
  {definition}
  {Définition}
  { 
    graphical environment = tikzpicture,
    boxsep = 0pt,
    fonttitle = \normalsize\sffamily\bfseries,
    toptitle = 5mm,
    top = 5mm,
    bottom = 5mm,
    left = 5mm,
    right = 5mm,
    frame engine = path,
    frame style = {fill=black!12},
    sharp corners = all,
    before upper = {\hspace*{-\parindent}}
  }
  {def}

\newcommand{\Definition}[2]{%
  \begin{definition}{#1}{}
  #2
  \end{definition}%
}

\newfontfamily\xitsfont
	  [
	    Scale=MatchLowercase,
      ]
      {XITSMath-Regular.otf}
\AdditionalFontImprint{XITS Math}

\setlength{\epigraphwidth}{.618\textwidth}% (Golden ratio)
\tikzset
  {
    reset shape/.style = {
      shape=rectangle,
      draw=none,
      fill=none
    },
    AbsSet/.style = {
      draw,
      circle,
      inner sep=9pt
    },
    ConcSet/.style = {
      draw,
      ellipse,
      font = {\itshape\strut}
    },
    EdgeLabel/.style = {
      midway,
      above,
      sloped,
      font=\small
    },
    every loop/.style={
        -{Triangle[]},
        out=120,
        in=60
    },
    FnEdgeLabel/.style={
      reset shape,
      font=\footnotesize
    },
    CircleNode/.style={
      circle, 
      draw,
      inner sep=2.5pt,
    },
    ConversionArrow/.style={
      double, 
      -{Triangle[open]}
    }
  }% exceptions for the every node/.style key

\newenvironment{langscibars}{\begin{axis}[ybar,xtick=data, xticklabels from table={\mydata}{pos},
        width  = \textwidth,
	height = .3\textheight,
    	nodes near coords,
	xtick=data,
	x tick label style={},
	ymin=0,
        ]}{\end{axis}}

\newcommand{\langscibar}[1]{\addplot+ table [x=i, y=#1] {\mydata};\addlegendentry{#1};}

\newcommand{\langscidata}[1]{\pgfplotstableread{#1}\mydata;}


\newcommand{\textstylePhono}[1]{#1}
\newcommand{\textstylePhonoApprofondissement}[1]{#1}
\newcommand{\textstylest}[1]{#1}
\newcommand{\textstyleTermes}[1]{\textsc{#1}}
\newcommand{\textstyleTermesapprof}[1]{\textsc{#1}}
\newcommand{\textstyleTermesapprofondissement}[1]{\textsc{#1}}

\newenvironment{styleExemplesuite}{}{}
\newenvironment{styleillustrationAFaire}{\begin{exe}\ex}{\end{exe}} %this seems to be object language material, which should be set off from surrounding text

\newenvironment{styleLivreImportant}{%
\begin{tblsfilled}{}
}{
\end{tblsfilled}%
}

\newenvironment{styleTitreChapitre}{}{}
\newenvironment{styleTitrePartie}{}{}
\newenvironment{styleTitreSection}{}{}
\newenvironment{styleTitreSousSection}{}{}

\newenvironment{styleaprofondissementInterTitre}{\color{red}}{}

%%%%%%%%%%%%%%%%%%%%%
\newcommand{\gkchapter}[2]{#1: #2}
\newcommand{\gkboxsection}[3]{\section{#2~\includegraphics[height=.75\baselineskip]{figures/gk-#1.pdf}}
    \marginpar{\includegraphics[height=5mm]{figures/gk-#1.pdf}}#3
    }
\renewcommand{\gkboxsection}[3]{\section{#2}#3}
% \newcommand{\tblsgk}[1]{{\color{blue} section starts here \includegraphics[height=5mm]{figures/#1}\par}}
\newcommand{\encadref}[1]{encadré~\ref{#1}}

\newcommand{\corrections}[1]{\begin{tblsfilledsymbol}{Corrections des exercices}{checkmark}#1\end{tblsfilledsymbol}}
% \newcommand{\loupe}[2]{\tblssy{loupe}{#1}{#2}}
\newcommand{\loupe}[2]{\gkboxsection{loupe}{#1}{#2}}
% \newcommand{\eiffel}[2]{\tblssy{eiffel}{#1}{#2}}
\newcommand{\eiffel}[2]{\gkboxsection{eiffel3}{#1}{#2}}
% \newcommand{\globe}[2]{\tblssy{globe}{#1}{#2}}
\newcommand{\globe}[2]{\gkboxsection{globe}{#1}{#2}}
% \newcommand{\chevalier}[2]{\tblssy{chevalier}{#1}{#2}}
\newcommand{\chevalier}[2]{\gkboxsection{chevalier2}{#1}{#2}}
% \newcommand{\maths}[2]{\tblssy{maths}{#1}{#2}}
\newcommand{\maths}[2]{\gkboxsection{maths}{#1}{#2}}

\newcommand{\exercices}[1]{\begin{tblsfilledsymbol}{Exercices}{pencil}#1\end{tblsfilledsymbol}}
\newcommand{\exercice}[1]{\paragraph*{Exercice #1}}
\newcommand{\corrigé}[1]{\paragraph*{Corrigé #1}}
\newcommand{\citations}[1]{\begin{tblsfilledsymbol}{Citations originales}{guillemets}#1\end{tblsfilledsymbol}}
\newcommand{\lecturesadditionnelles}[1]{\begin{tblsfilledsymbol}{Lectures additionnelles}{book}#1\end{tblsfilledsymbol}}


\newcommand{\HappySmiley}{\bgroup\fontspec[Scale=MatchUppercase]{DejaVuSansMono.ttf}☺\egroup}
\newcommand{\SadSmiley}{\bgroup\fontspec[Scale=MatchUppercase]{DejaVuSansMono.ttf}☹\egroup}
